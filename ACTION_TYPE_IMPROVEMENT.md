# Action Type ìë™ì¶”ì²œ ë¡œì§ ê°œì„  ê³„íš

**ì‘ì„±ì¼**: 2025-11-11
**ìƒíƒœ**: ê³„íš ìˆ˜ë¦½ ì™„ë£Œ

---

## ğŸ“Š í˜„ì¬ ë¡œì§ ë¶„ì„

### ìš°ì„ ìˆœìœ„ ì²´ê³„ (Priority-based Logic)

```
Priority 1: Reference/mindset (ë§ˆìŒê°€ì§ í‚¤ì›Œë“œ)
  â†“
Priority 2: Periodic missions (ë¶„ê¸°/ì—°ê°„/ì›”ê°„/ì£¼ê°„ ë°˜ë³µ ëª©í‘œ)
  â†“
Priority 3: One-time missions (ì™„ë£Œ ëª©í‘œ + ìˆ˜ì¹˜)
  â†“
Priority 4: Number-based goals (ì‹œê°„+ë™ì‚¬ ì˜ˆì™¸ ì²˜ë¦¬)
  â†“
Priority 5: Routines with explicit frequency (ë§¤ì¼/ë§¤ì£¼/ë§¤ì›”)
  â†“
Priority 6: Common action verbs (ë™ì‚¬ ê¸°ë°˜ ë£¨í‹´)
  â†“
Default: Routine (daily, low confidence)
```

### í˜„ì¬ í‚¤ì›Œë“œ ëª©ë¡

**Reference (ì°¸ê³ /ë§ˆìŒê°€ì§)**
```
ë§ˆìŒ, íƒœë„, ì •ì‹ , ìì„¸, ìƒê°, ë§ˆì¸ë“œ, ê°€ì¹˜, ì² í•™, ì›ì¹™, ëª…ì–¸, ë‹¤ì§, ì‹ ë…, ê¸°ì¤€, ëª…ì‹¬
```

**Mission (ì™„ë£Œ ëª©í‘œ)**
```
ë‹¬ì„±, ì·¨ë“, ì™„ë£Œ, ë§ˆì¹˜ê¸°, ëë‚´ê¸°, íšë“, í†µê³¼, ì„±ê³µ, ì„±ì·¨, ê°ëŸ‰, ì¦ê°€, í–¥ìƒ, ê°œì„ , ì¦ì§„
ëª©í‘œ, ë„ì „, ì„±ê³µ
```

**Routine (ë°˜ë³µ ì‹¤ì²œ)**
```
ë§¤ì¼, í•˜ë£¨, daily, ë‚ ë§ˆë‹¤, ì¼ì¼
ë§¤ì£¼, ì£¼ NíšŒ, ì£¼ê°„, weekly
ë§¤ì›”, ì›” NíšŒ, ì›”ê°„, monthly
ë§¤ë…„, ì—°ê°„, ë…„ NíšŒ, yearly
ë¶„ê¸°, quarter

ì½ê¸°, ê³µë¶€, ìš´ë™, ëª…ìƒ, ê¸°ë„, ì“°ê¸°, ë³´ê¸°, ë“£ê¸°, í•˜ê¸°, ê±·ê¸°, ë‹¬ë¦¬ê¸°, ë¨¹ê¸°, ë§ˆì‹œê¸°,
ì¼ì–´ë‚˜ê¸°, ìê¸°, ì •ë¦¬, ì²­ì†Œ, ì²´í¬, í™•ì¸, ê²€í† , ë³µìŠµ, ì˜ˆìŠµ
```

---

## ğŸ” ë°œê²¬ëœ ë¬¸ì œì 

### 1. ë£¨í‹´ í¸í–¥ (Routine Bias)
**ë¬¸ì œ**: Defaultê°€ `routine`ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ ë¶ˆëª…í™•í•œ ê²½ìš° ëª¨ë‘ ë£¨í‹´ìœ¼ë¡œ ë¶„ë¥˜
**ì˜ˆì‹œ**:
- "ì˜ì–´ ì‹¤ë ¥ í–¥ìƒ" â†’ ë£¨í‹´ (low confidence)
  - ì‹¤ì œë¡œëŠ” ë¯¸ì…˜ì¼ ê°€ëŠ¥ì„± ë†’ìŒ
- "ì±… ì™„ë…" â†’ ë£¨í‹´ (low confidence)
  - ì‹¤ì œë¡œëŠ” ë¯¸ì…˜ (once)

**ì›ì¸**: ìµœì¢… fallbackì´ routineìœ¼ë¡œ ë˜ì–´ ìˆìŒ

```typescript
// Default: routine with low confidence
return {
  type: 'routine',
  confidence: 'low',
  reason: 'ë£¨í‹´ìœ¼ë¡œ ì¶”ì •ë©ë‹ˆë‹¤',
  routineFrequency: 'daily'
}
```

### 2. ìˆ˜ì¹˜ ëª©í‘œ ì˜¤ë¶„ë¥˜ ê°€ëŠ¥ì„±
**ë¬¸ì œ**: ìˆ«ìê°€ í¬í•¨ëœ ëª©í‘œì˜ ê²½ìš° ë§¥ë½ íŒŒì•… ë¶€ì¡±
**ì˜ˆì‹œ**:
- "30ë¶„ ìš´ë™" â†’ ë£¨í‹´ âœ… (ì˜¬ë°”ë¦„)
- "10kg ê°ëŸ‰" â†’ ë¯¸ì…˜ âœ… (ì˜¬ë°”ë¦„)
- "100ë§Œì› ì €ì¶•" â†’ ë¯¸ì…˜ (medium confidence)
  - ì£¼ê¸°ê°€ ëª…ì‹œë˜ì§€ ì•Šìœ¼ë©´ one-timeìœ¼ë¡œ ë¶„ë¥˜

**ê°œì„  í•„ìš”**: ì£¼ê¸° í‚¤ì›Œë“œ ì—†ì´ ìˆ«ìë§Œ ìˆëŠ” ê²½ìš° ë” ì •í™•í•œ ë¶„ë¥˜

### 3. Confidence Level í™œìš© ë¶€ì¡±
**ë¬¸ì œ**: Low/Medium confidence ê²°ê³¼ì— ëŒ€í•œ í›„ì† ì²˜ë¦¬ ì—†ìŒ
**í˜„í™©**:
- ConfidenceëŠ” ê³„ì‚°ë˜ì§€ë§Œ UIì—ì„œ í™œìš©ë˜ì§€ ì•ŠìŒ
- ì‚¬ìš©ìê°€ ì¶”ì²œ ê²°ê³¼ë¥¼ ê²€í† /ìˆ˜ì •í•  ê¸°íšŒ ë¶€ì¡±

### 4. í‚¤ì›Œë“œ ì»¤ë²„ë¦¬ì§€ ë¶€ì¡±
**ë¬¸ì œ**: ì‹¤ì œ ì‚¬ìš©ìê°€ ì…ë ¥í•  ë‹¤ì–‘í•œ í‘œí˜„ ë¯¸ì§€ì›
**ëˆ„ë½ëœ í‘œí˜„ë“¤**:
- ë£¨í‹´: "ì‹¤ì²œ", "ìœ ì§€", "ì§€ì†", "ê¾¸ì¤€íˆ", "ê³„ì†"
- ë¯¸ì…˜: "ì™„ì„±", "ëë§ˆì¹˜ê¸°", "ë„ë‹¬", "ì´ë£¨ê¸°", "ì„±ê³µì ìœ¼ë¡œ"
- ì°¸ê³ : "ì—¼ë‘", "ìœ ë…", "ê¸°ì–µ", "ìƒˆê¸°ê¸°", "ë˜ìƒˆê¸°ë‹¤"

---

## ğŸ¯ ê°œì„  ê³„íš

### Phase 1: í‚¤ì›Œë“œ í™•ì¥ ë° ì •ë°€í™”

#### 1.1 ë£¨í‹´ í‚¤ì›Œë“œ í™•ì¥
**ì¶”ê°€í•  í‚¤ì›Œë“œ**:
```typescript
const routineKeywords = /ì‹¤ì²œ|ìœ ì§€|ì§€ì†|ê¾¸ì¤€íˆ|ê³„ì†|ë§¤ë²ˆ|í•­ìƒ|ìŠµê´€|ë°˜ë³µ/
```

**ì˜ˆìƒ íš¨ê³¼**:
- "ê¾¸ì¤€íˆ ë…ì„œí•˜ê¸°" â†’ ë£¨í‹´ (high confidence)
- "ìŠµê´€ ë§Œë“¤ê¸°" â†’ ë£¨í‹´ (high confidence)

#### 1.2 ë¯¸ì…˜ í‚¤ì›Œë“œ í™•ì¥
**ì¶”ê°€í•  í‚¤ì›Œë“œ**:
```typescript
const missionKeywords = /ì™„ì„±|ëë§ˆì¹˜ê¸°|ë„ë‹¬|ì´ë£¨ê¸°|ì„±ê³µì ìœ¼ë¡œ|ë§ˆìŠ¤í„°|ì •ë³µ|í´ë¦¬ì–´/
```

**ì˜ˆìƒ íš¨ê³¼**:
- "ì±… ì™„ì„±í•˜ê¸°" â†’ ë¯¸ì…˜ (high confidence)
- "ìê²©ì¦ ì·¨ë“ ì™„ë£Œ" â†’ ë¯¸ì…˜ (high confidence)

#### 1.3 ì°¸ê³  í‚¤ì›Œë“œ í™•ì¥
**ì¶”ê°€í•  í‚¤ì›Œë“œ**:
```typescript
const referenceKeywords = /ì—¼ë‘|ìœ ë…|ê¸°ì–µ|ìƒˆê¸°ê¸°|ë˜ìƒˆê¸°ë‹¤|ìŠì§€ë§ê¸°|ìƒê¸°|ì¸ì§€/
```

**ì˜ˆìƒ íš¨ê³¼**:
- "ê¸ì •ì  ë§ˆì¸ë“œ ìœ ë…" â†’ ì°¸ê³  (high confidence)
- "ëª©í‘œ ìƒê¸°í•˜ê¸°" â†’ ì°¸ê³  (high confidence)

---

### Phase 2: ë£¨í‹´/ë¯¸ì…˜ ë¹„ìœ¨ ìµœì í™”

#### 2.1 ë™ì‚¬ í˜•íƒœ ë¶„ì„ ê°•í™”
**í˜„ì¬ ë¬¸ì œ**: ë™ì‚¬ë§Œìœ¼ë¡œëŠ” ë£¨í‹´/ë¯¸ì…˜ êµ¬ë¶„ ì–´ë ¤ì›€
- "ì½ê¸°" â†’ ë£¨í‹´ vs ë¯¸ì…˜?
- "ìš´ë™í•˜ê¸°" â†’ ë£¨í‹´ vs ë¯¸ì…˜?

**ê°œì„  ë°©ì•ˆ**: ë§¥ë½ ê¸°ë°˜ ë¶„ë¥˜
```typescript
// "~í•˜ê¸°" í˜•íƒœëŠ” ë§¥ë½ í™•ì¸
const isActionVerb = /í•˜ê¸°|ì½ê¸°|ì“°ê¸°|ë³´ê¸°$/.test(lower)

if (isActionVerb) {
  // ì£¼ê¸° í‚¤ì›Œë“œ ìˆìœ¼ë©´ â†’ ë£¨í‹´
  if (hasFrequencyKeyword) return routine

  // ìˆ˜ì¹˜ ëª©í‘œ ìˆìœ¼ë©´ â†’ ë¯¸ì…˜
  if (hasNumberGoal) return mission

  // ë¶ˆëª…í™•í•˜ë©´ â†’ medium confidence routine
  return { type: 'routine', confidence: 'medium' }
}
```

#### 2.2 Default ì „ëµ ë³€ê²½
**í˜„ì¬**: ë¬´ì¡°ê±´ routine (low confidence)
**ê°œì„ **: íƒ€ì…ë³„ ê°€ëŠ¥ì„± ì ìˆ˜ ê³„ì‚°

```typescript
// Score-based classification
const scores = {
  routine: calculateRoutineScore(title),
  mission: calculateMissionScore(title),
  reference: calculateReferenceScore(title)
}

const bestMatch = Object.entries(scores)
  .sort(([,a], [,b]) => b - a)[0]

if (bestMatch[1] < threshold) {
  return { type: 'routine', confidence: 'low', reason: 'ëª…í™•í•˜ì§€ ì•Šì•„ ë£¨í‹´ìœ¼ë¡œ ë¶„ë¥˜í–ˆì–´ìš”' }
}
```

---

### Phase 3: Confidence í™œìš© ê°œì„ 

#### 3.1 UI í”¼ë“œë°± ì¶”ê°€
**Low/Medium Confidence ì‹œ ì‚¬ìš©ì í™•ì¸ ìœ ë„**

```typescript
// ìë™ì¶”ì²œ ê²°ê³¼ í‘œì‹œ
if (suggestion.confidence === 'low' || suggestion.confidence === 'medium') {
  // Warning UI í‘œì‹œ
  <Alert variant="warning">
    <AlertTitle>ìë™ ë¶„ë¥˜ ê²°ê³¼ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”</AlertTitle>
    <AlertDescription>
      {suggestion.reason}
      <br />
      íƒ€ì…ì´ ë§ì§€ ì•Šìœ¼ë©´ ìˆ˜ì •í•´ì£¼ì„¸ìš”.
    </AlertDescription>
  </Alert>
}
```

#### 3.2 í•™ìŠµ ë°ì´í„° ìˆ˜ì§‘ (í–¥í›„)
**ì‚¬ìš©ì ìˆ˜ì • ì´ë ¥ ì €ì¥**:
- ìë™ ì¶”ì²œ: routine â†’ ì‚¬ìš©ì ìˆ˜ì •: mission
- íŒ¨í„´ í•™ìŠµ ê°€ëŠ¥ì„± í™•ë³´

---

### Phase 4: í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±

#### 4.1 ë£¨í‹´ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
```typescript
const routineTestCases = [
  // ëª…í™•í•œ ë£¨í‹´
  { input: 'ë§¤ì¼ 30ë¶„ ìš´ë™', expected: { type: 'routine', confidence: 'high' } },
  { input: 'ì£¼ 3íšŒ ë…ì„œ', expected: { type: 'routine', confidence: 'high' } },

  // ì• ë§¤í•œ ë£¨í‹´
  { input: 'ê¾¸ì¤€íˆ ê³µë¶€í•˜ê¸°', expected: { type: 'routine', confidence: 'medium' } },
  { input: 'ìŠµê´€ ë§Œë“¤ê¸°', expected: { type: 'routine', confidence: 'medium' } },
]
```

#### 4.2 ë¯¸ì…˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
```typescript
const missionTestCases = [
  // ëª…í™•í•œ ë¯¸ì…˜
  { input: 'í† ìµ 900ì  ë‹¬ì„±', expected: { type: 'mission', confidence: 'high' } },
  { input: 'ì±… 10ê¶Œ ì™„ë…', expected: { type: 'mission', confidence: 'high' } },

  // ì• ë§¤í•œ ë¯¸ì…˜
  { input: 'ì˜ì–´ ì‹¤ë ¥ í–¥ìƒ', expected: { type: 'mission', confidence: 'medium' } },
  { input: 'í”„ë¡œì íŠ¸ ì™„ì„±', expected: { type: 'mission', confidence: 'medium' } },
]
```

#### 4.3 ì°¸ê³  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
```typescript
const referenceTestCases = [
  // ëª…í™•í•œ ì°¸ê³ 
  { input: 'ê¸ì •ì  ë§ˆì¸ë“œ ìœ ì§€', expected: { type: 'reference', confidence: 'high' } },
  { input: 'ëª©í‘œë¥¼ í•­ìƒ ì—¼ë‘ì— ë‘ê¸°', expected: { type: 'reference', confidence: 'high' } },

  // ì• ë§¤í•œ ì°¸ê³ 
  { input: 'ì„±ì¥ ë§ˆì¸ë“œì…‹', expected: { type: 'reference', confidence: 'medium' } },
]
```

---

## ğŸ“ˆ ì˜ˆìƒ ê°œì„  íš¨ê³¼

### ì •ëŸ‰ì  ëª©í‘œ
- **ì •í™•ë„ í–¥ìƒ**: í˜„ì¬ ì¶”ì • 70% â†’ ëª©í‘œ 85%+
- **High Confidence ë¹„ìœ¨**: í˜„ì¬ ì¶”ì • 50% â†’ ëª©í‘œ 70%+
- **ì‚¬ìš©ì ìˆ˜ì •ë¥ **: í˜„ì¬ ì¶”ì • 30% â†’ ëª©í‘œ 15% ì´í•˜

### ì •ì„±ì  ëª©í‘œ
1. **ì‚¬ìš©ì ì‹ ë¢°ë„ í–¥ìƒ**: ì¶”ì²œ ê²°ê³¼ê°€ ë” ì •í™•í•´ì ¸ ì‹ ë¢° ì¦ê°€
2. **ì…ë ¥ í¸ì˜ì„±**: ìë™ ë¶„ë¥˜ ì •í™•ë„ í–¥ìƒìœ¼ë¡œ ìˆ˜ë™ ìˆ˜ì • ê°ì†Œ
3. **ë°ì´í„° í’ˆì§ˆ**: ì˜¬ë°”ë¥¸ íƒ€ì… ë¶„ë¥˜ë¡œ í†µê³„ ì •í™•ë„ í–¥ìƒ

---

## ğŸš€ êµ¬í˜„ ìš°ì„ ìˆœìœ„

### ìš°ì„ ìˆœìœ„ 1 (High Impact, Low Effort)
- [x] ë¬¸ì„œí™” ì™„ë£Œ
- [ ] í‚¤ì›Œë“œ í™•ì¥ (Phase 1)
- [ ] í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„± (Phase 4)

### ìš°ì„ ìˆœìœ„ 2 (High Impact, Medium Effort)
- [ ] ë™ì‚¬ í˜•íƒœ ë¶„ì„ ê°•í™” (Phase 2.1)
- [ ] Default ì „ëµ ë³€ê²½ (Phase 2.2)

### ìš°ì„ ìˆœìœ„ 3 (Medium Impact, Low Effort)
- [ ] UI í”¼ë“œë°± ì¶”ê°€ (Phase 3.1)

### ìš°ì„ ìˆœìœ„ 4 (í–¥í›„ ê²€í† )
- [ ] í•™ìŠµ ë°ì´í„° ìˆ˜ì§‘ (Phase 3.2)
- [ ] Score-based classification (Phase 2.2 ê³ ë„í™”)

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. **í˜„ì¬ ì‘ì—… ì»¤ë°‹ ë° í‘¸ì‹œ**
   - IMPROVEMENTS.md ì—…ë°ì´íŠ¸
   - ACTION_TYPE_IMPROVEMENT.md ìƒì„±

2. **Phase 1 êµ¬í˜„ ì‹œì‘**
   - `src/lib/actionTypes.ts` í‚¤ì›Œë“œ í™•ì¥
   - í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±

3. **ê²€ì¦ ë° í”¼ë“œë°± ìˆ˜ì§‘**
   - ì‹¤ì œ ì‚¬ìš©ì ë°ì´í„°ë¡œ ì •í™•ë„ ì¸¡ì •
   - í•„ìš”ì‹œ ì¶”ê°€ ì¡°ì •

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-11-11
**ë‹´ë‹¹**: ìë™ì¶”ì²œ ë¡œì§ ê°œì„  TF
