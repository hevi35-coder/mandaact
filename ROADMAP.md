# MandaAct 개발 로드맵 v2.0

**최종 업데이트**: 2025-11-08
**현재 상태**: Phase 2 완료, AI 코치 기능 제거 완료

---

## 📊 현재 프로젝트 상태

### ✅ 완료된 Phase
- **Phase 1-A**: Image OCR (4개) ✅
- **Phase 1**: UX 개선 (4개) ✅
- **Phase 2**: 기능 확장 (4개) ✅
- **Phase 2 후속**: UX 개선 (8개) ✅
- **리팩토링**: AI 코치 & Chat 기능 제거 ✅

### 🎯 핵심 기능 현황
| 기능 영역 | 상태 | 설명 |
|---------|------|------|
| 만다라트 생성 | ✅ 완료 | 이미지 OCR, 텍스트 파싱, 수동 입력 |
| 액션 관리 | ✅ 완료 | CRUD, 타입 시스템 (루틴/미션/참고) |
| 일일 체크 | ✅ 완료 | 오늘의 실천, 날짜 선택, 어제까지 체크 |
| 통계/리포트 | ✅ 완료 | 대시보드, 진행률, 히트맵, 만다라트 필터 |
| 알림 | ✅ 완료 | PWA 푸시 알림, 권한 관리 |
| 인증 | ✅ 완료 | 이메일/비밀번호 로그인 |
| AI 코치 | ❌ 제거됨 | 재설계 필요 시 Phase 5에서 |

---

## 🚀 Phase 3: 코드 품질 & 안정성 (우선순위: 높음)

**목표**: 프로덕션 배포 전 코드 품질 확보 및 기술 부채 해소
**기간**: 1-2주

### 3.1 ESLint 오류 수정 ⚠️ **[중요]**
**현황**:
- 총 26개 문제 (18 errors, 8 warnings)
- 주요 문제:
  - `any` 타입 남용 (11개)
  - `prefer-const` 위반 (2개)
  - React Hook 의존성 누락 (6개)

**작업 목록**:
- [ ] `src/lib/stats.ts`: `any` 타입 제거 (9개)
- [ ] `src/pages/MandalartCreatePage.tsx`: 타입 명시 (이미 완료 2개)
- [ ] `supabase/functions/ocr-mandalart/index.ts`: `any` 타입 제거 (7개)
- [ ] React Hook 의존성 경고 해결 (6개 파일)
- [ ] shadcn/ui 컴포넌트 경고 처리 (2개)

**우선순위**: 🔴 Critical (배포 전 필수)

---

### 3.2 TypeScript 타입 안정성 강화
**작업 목록**:
- [ ] `src/lib/stats.ts`: 통계 함수 반환 타입 명시
- [ ] OCR 응답 타입 정의 (`OCRResponse` 인터페이스)
- [ ] API 응답 타입 일관성 검증
- [ ] Zustand 스토어 타입 안전성 개선

**우선순위**: 🟡 Important

---

### 3.3 에러 핸들링 개선
**작업 목록**:
- [ ] 전역 에러 바운더리 추가 (루트 레벨)
- [ ] Edge Function 에러 응답 표준화
- [ ] 사용자 친화적 에러 메시지 (한글)
- [ ] Sentry 통합 (에러 추적)

**우선순위**: 🟡 Important

---

### 3.4 성능 최적화
**작업 목록**:
- [ ] 번들 크기 분석 (현재: 1.33MB → 목표: <1MB)
- [ ] Code splitting 적용 (React.lazy)
- [ ] 이미지 최적화 (WebP, lazy loading)
- [ ] TanStack Query 캐싱 전략 개선
- [ ] 불필요한 re-render 방지 (React.memo)

**측정 기준**:
- Lighthouse Performance Score > 90
- First Contentful Paint < 1.5s
- Time to Interactive < 3s

**우선순위**: 🟢 Recommended

---

### 3.5 테스트 추가
**작업 목록**:
- [ ] Vitest 설정 (단위 테스트)
- [ ] 핵심 비즈니스 로직 테스트:
  - `src/lib/actionTypes.ts` (타입 추천 로직)
  - `src/lib/stats.ts` (통계 계산)
  - `shouldShowToday()` (액션 표시 로직)
- [ ] React Testing Library (컴포넌트 테스트)
  - TodayChecklistPage
  - MandalartDetailPage
- [ ] E2E 테스트 (Playwright) - 선택사항
  - 만다라트 생성 플로우
  - 체크 플로우

**우선순위**: 🟢 Recommended (배포 후에도 가능)

---

## 🎨 Phase 4: UX 디테일 개선 (우선순위: 중간)

**목표**: 사용자 경험 마지막 다듬기
**기간**: 1주

### 4.1 만다라트 상세 페이지 개선
**작업 목록**:
- [ ] 핵심 목표 시각적 강조 (크기, 색상, 배경)
- [ ] "핵심목표" 라벨 연하게 처리 (#13, #14)
- [ ] 9x9 그리드 반응형 최적화 (모바일)
- [ ] 셀 호버 시 툴팁 표시 (전체 텍스트)

**우선순위**: 🟢 Recommended

---

### 4.2 아이콘 & UI 정리
**작업 목록**:
- [ ] 목표 우측 불필요한 아이콘 제거 확인 (#3)
- [ ] 액션 타입 아이콘 일관성 검토
- [ ] 색상 팔레트 통일 (Tailwind theme 확장)
- [ ] 로딩 스피너/스켈레톤 UI 추가

**우선순위**: 🟢 Recommended

---

### 4.3 접힘/펼침 사용자 설정
**작업 목록**:
- [ ] LocalStorage에 섹션 상태 저장
- [ ] "전체 펼치기/접기" 버튼 추가
- [ ] 설정 페이지에서 기본값 변경 가능

**우선순위**: 🟢 Nice-to-have

---

### 4.4 빈 상태 (Empty State) 개선
**작업 목록**:
- [ ] 만다라트 없을 때: 온보딩 일러스트 + CTA
- [ ] 체크 항목 없을 때: 격려 메시지
- [ ] 통계 데이터 없을 때: 가이드 표시

**우선순위**: 🟢 Nice-to-have

---

## 📱 Phase 5: AI 재설계 (선택사항, 우선순위: 낮음)

**목표**: AI 기반 사용자 경험 재도입 (필요시)
**기간**: 2-3주

### 옵션 A: 간소화된 AI 도우미
**컨셉**: 전체 만다라트 생성이 아닌, 보조 기능으로만 활용

**기능**:
- [ ] AI 실천 항목 제안 (세부 목표 입력 시)
  - "운동" 입력 → "매일 30분 걷기", "주 3회 근력 운동" 제안
  - Perplexity API 사용, 3개 제안, 사용자 선택
- [ ] AI 동기부여 메시지 생성 (주간 리포트)
  - 실천율 데이터 → 개인화된 격려 메시지
  - 이메일 or 앱 내 알림

**장점**:
- 가볍고 빠른 구현
- 부담 없는 사용자 경험
- 비용 효율적 (프롬프트당 $0.002)

**비용 추정**: $5-10/month (100 DAU 기준)

**우선순위**: 🟢 Optional

---

### 옵션 B: 풀스택 AI 코칭 재구현
**컨셉**: 채팅 기반 만다라트 생성 재도입 (처음부터 재설계)

**설계 원칙**:
1. **단순화**: 4단계 → 2-3단계로 축소
2. **선택사항**: 수동 입력의 "추가 옵션"으로 제공
3. **빠른 완료**: 5분 이내 생성 목표

**작업 목록**:
- [ ] 새 프롬프트 전략 설계
- [ ] UI 재설계 (간소화된 플로우)
- [ ] Edge Function 재구현
- [ ] 베타 테스트 + 피드백 수집

**우선순위**: 🟡 Consider Later (사용자 피드백 후 결정)

---

## 🌐 Phase 6: 배포 & 운영 준비 (우선순위: 높음)

**목표**: 프로덕션 환경 안정화
**기간**: 1주

### 6.1 환경 설정 & 시크릿 관리
**작업 목록**:
- [ ] `.env.example` 파일 생성
- [ ] Vercel 환경 변수 설정
- [ ] Supabase Secrets 검증
  - `GCP_PROJECT_ID`
  - `GCP_CLIENT_EMAIL`
  - `GCP_PRIVATE_KEY`
  - `PERPLEXITY_API_KEY` (사용 안 해도 삭제 안 함)

**우선순위**: 🔴 Critical

---

### 6.2 Supabase 마이그레이션 최종 검증
**작업 목록**:
- [ ] 로컬 DB와 원격 DB 동기화 확인
- [ ] 마이그레이션 이력 정리
- [ ] RLS 정책 검증 (보안 테스트)
- [ ] 백업 전략 수립

**우선순위**: 🔴 Critical

---

### 6.3 CI/CD 파이프라인 구축
**작업 목록**:
- [ ] GitHub Actions 설정
  - `npm run type-check` 자동 실행
  - `npm run lint` 자동 실행
  - `npm run build` 검증
- [ ] Vercel 자동 배포 연동
- [ ] PR 프리뷰 배포 활성화

**우선순위**: 🟡 Important

---

### 6.4 모니터링 & 분석
**작업 목록**:
- [ ] PostHog 통합 (이미 설치됨?)
- [ ] 핵심 이벤트 추적:
  - `mandalart_created`
  - `action_checked`
  - `notification_clicked`
- [ ] Sentry 에러 추적 설정
- [ ] Vercel Analytics 활성화

**우선순위**: 🟡 Important

---

### 6.5 프로덕션 체크리스트
**배포 전 필수 확인사항**:
- [ ] ESLint 에러 0개
- [ ] TypeScript 에러 0개
- [ ] 프로덕션 빌드 성공
- [ ] Lighthouse Score > 85
- [ ] 모든 페이지 수동 테스트 (크롬, 사파리)
- [ ] 모바일 반응형 테스트 (iPhone, Android)
- [ ] Edge Functions 배포 확인:
  - `ocr-mandalart` ✅
  - `parse-mandalart-text` ✅
- [ ] 환경 변수 설정 완료
- [ ] 도메인 연결 (선택사항)
- [ ] SSL 인증서 (Vercel 자동)

**우선순위**: 🔴 Critical

---

## 🎓 Phase 7: 사용자 온보딩 개선 (우선순위: 중간)

**목표**: 신규 사용자 활성화율 향상
**기간**: 3-5일

### 7.1 온보딩 투어
**작업 목록**:
- [ ] react-joyride 라이브러리 통합
- [ ] 첫 로그인 시 가이드 투어
  - "만다라트 만들기" 소개
  - "오늘의 실천" 사용법
  - "통계" 페이지 설명
- [ ] 스킵 가능 + 다시 보기 버튼

**우선순위**: 🟢 Recommended

---

### 7.2 샘플 만다라트 제공
**작업 목록**:
- [ ] 템플릿 선택 화면 추가
  - "건강 개선"
  - "커리어 성장"
  - "자기계발"
- [ ] "샘플로 시작하기" 버튼
- [ ] 샘플 데이터 수정 가능

**우선순위**: 🟢 Nice-to-have

---

### 7.3 튜토리얼 비디오/GIF
**작업 목록**:
- [ ] 주요 기능 시연 영상 제작
- [ ] 로딩 페이지에 팁 표시
- [ ] 도움말 센터 페이지

**우선순위**: 🟢 Nice-to-have

---

## 🔮 Phase 8: 고급 기능 (선택사항)

**목표**: 차별화된 사용자 경험
**기간**: 2-3주

### 8.1 퀴즈 기능 (원래 Phase 3.2)
**작업 목록**:
- [ ] 주간 복습 퀴즈 생성 (AI)
- [ ] "당신의 목표는?" 객관식 퀴즈
- [ ] 정답 시 격려 메시지
- [ ] 퀴즈 결과 통계

**우선순위**: 🟢 Future

---

### 8.2 소셜 공유 기능
**작업 목록**:
- [ ] 만다라트 이미지 생성 (HTML → Canvas)
- [ ] SNS 공유 버튼 (카카오톡, 트위터, 페이스북)
- [ ] 공개 프로필 페이지 (선택사항)
- [ ] 친구 초대 기능

**우선순위**: 🟢 Future

---

### 8.3 음성 체크인
**작업 목록**:
- [ ] Web Speech API 통합
- [ ] "오늘 운동했어요" → 자동 체크
- [ ] 음성 인식 정확도 개선

**우선순위**: 🟢 Experimental

---

## 📊 성공 지표 (KPIs)

### 단기 목표 (배포 후 1개월)
| 지표 | 목표 |
|-----|------|
| 회원가입 전환율 | > 50% |
| 온보딩 완료율 (만다라트 생성) | > 70% |
| DAU / MAU (Stickiness) | > 30% |
| 주간 평균 체크 수 | > 10 |
| 7일 리텐션 | > 40% |

### 중기 목표 (3개월)
| 지표 | 목표 |
|-----|------|
| MAU | 500+ |
| DAU / MAU | > 50% |
| 주간 평균 체크 수 | > 20 |
| NPS | > 50 |

---

## 🗓️ 타임라인 요약

```
Week 1-2  | Phase 3: 코드 품질 & 안정성     [🔴 Critical]
          ├─ ESLint 오류 수정
          ├─ TypeScript 타입 강화
          └─ 에러 핸들링 개선

Week 3    | Phase 6: 배포 준비              [🔴 Critical]
          ├─ 환경 설정
          ├─ Supabase 검증
          └─ 프로덕션 체크리스트

Week 4    | Phase 4: UX 디테일 개선         [🟡 Important]
          ├─ 만다라트 상세 페이지
          ├─ 아이콘 정리
          └─ 빈 상태 개선

Week 5    | Phase 7: 온보딩 개선            [🟢 Recommended]
          ├─ 온보딩 투어
          └─ 샘플 만다라트

Week 6+   | Phase 5/8: AI & 고급 기능       [🟢 Optional]
          └─ 사용자 피드백 기반 결정
```

---

## 🎯 즉시 착수 가능한 작업 (Quick Wins)

**오늘/내일 할 수 있는 작업**:

1. **ESLint 오류 수정** (2-3시간)
   - `src/lib/stats.ts` any 타입 제거
   - React Hook 의존성 추가

2. **프로덕션 빌드 검증** (30분)
   - `npm run build` 성공 확인
   - Vercel 배포 테스트

3. **환경 변수 정리** (30분)
   - `.env.example` 생성
   - README 업데이트

4. **Git 정리** (15분)
   - feature 브랜치 병합
   - main 브랜치 푸시
   - 불필요한 문서 정리

---

## 📝 의사결정 필요 사항

### 우선순위 결정
- [ ] **AI 재도입 여부**: 옵션 A (간소화) vs 옵션 B (풀스택) vs 없음
- [ ] **배포 시기**: 2주 후 (최소 품질) vs 4주 후 (완전 준비)
- [ ] **테스트 커버리지**: 핵심만 vs 전체 커버리지

### 기술 결정
- [ ] **에러 추적 도구**: Sentry vs LogRocket vs 없음
- [ ] **분석 도구**: PostHog vs Google Analytics vs Mixpanel
- [ ] **모니터링**: Vercel Analytics만 vs 추가 도구

---

## 🔄 로드맵 업데이트 기준

이 로드맵은 다음 상황에서 업데이트됩니다:
- Phase 완료 시
- 사용자 피드백 수집 후
- 기술적 제약 발견 시
- 비즈니스 우선순위 변경 시

**다음 리뷰**: Phase 3 완료 후

---

**문서 버전**: 2.0
**최종 수정**: 2025-11-08
**작성자**: Development Team
